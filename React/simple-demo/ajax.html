<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ajax</title>
	<script type="text/javascript" src="js/react.js"></script>
	<script type="text/javascript" src="js/JSXTransformer.js"></script>
	</style>
</head>
<body>
	<script type="text/jsx">
		var AjaxData = React.createClass({
			getInitialState: function () {
				return {
					username: '',
					friends: ''
				}
			},

			componentDidMount: function () {
				var url = this.props.reqUrl,
					xhr = new XMLHttpRequest();

				xhr.open('GET', url, false);

				xhr.onreadystatechange = function () {
					if (xhr.readyState == 4) {
						var status = xhr.status,
							result = (status >= 200 && status < 300) || status === 304;

						if (result === true) {
							var respone = JSON.parse(xhr.responseText);
							this.setState(respone);
						}
					}
				}.bind(this);

				xhr.send(null);
			},

			render: function () {
				return (
					<div>
						<p>{this.state.username}</p>
						<ul>
							<li>{this.state.friends}</li>
						</ul>
					</div>
				)
			}
		});

		React.render(
			<AjaxData reqUrl="data.json" />,
			document.getElementsByTagName('body')[0]
		);
	</script>
</body>
</html>